@use '../style/functions' as fn;
@use '../style/mixins/bem';

// #variables
:root,
page {
  --sar-progress-bar-height: 4px;
  --sar-progress-bar-border-radius: var(--sar-rounded-sm);
  --sar-progress-bar-bg: var(--sar-secondary-bg);

  --sar-progress-bar-trail-color: var(--sar-white);
  --sar-progress-bar-trail-bg: var(--sar-primary);
  --sar-progress-bar-trail-font-size: 12px;
  --sar-progress-bar-trail-transition-duration: var(--sar-duration-slow);
  --sar-progress-bar-trail-striped-size: 16px;
}
// #endvariables

@include bem.bem(progress-bar) {
  @include bem.b() {
    height: var(--sar-progress-bar-height);
    border-radius: var(--sar-progress-bar-border-radius);
    background-color: var(--sar-progress-bar-bg);
    overflow: hidden;
  }

  @include bem.e(trail) {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    font-size: var(--sar-progress-bar-trail-font-size);
    color: var(--sar-progress-bar-trail-color);
    background-color: var(--sar-progress-bar-trail-bg);
    transition: width var(--sar-progress-bar-trail-transition-duration) ease;

    @include bem.m(striped) {
      background-image: linear-gradient(
        45deg,
        rgba(255, 255, 255, 0.15) 25%,
        transparent 25%,
        transparent 50%,
        rgba(255, 255, 255, 0.15) 50%,
        rgba(255, 255, 255, 0.15) 75%,
        transparent 75%,
        transparent
      );
      background-size: var(--sar-progress-bar-trail-striped-size)
        var(--sar-progress-bar-trail-striped-size);
    }

    @include bem.m(animated) {
      animation: 1s linear infinite #{fn.bem-ns(progress-bar-trail-striped)};
    }
  }
}

@keyframes #{fn.bem-ns(progress-bar-trail-striped)} {
  0% {
    background-position-x: var(--sar-progress-bar-trail-striped-size);
  }
}
