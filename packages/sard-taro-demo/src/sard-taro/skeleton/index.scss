@import '../style/variables.scss';
@import '../style/functions.scss';
@import '../style/mixins/bem.scss';
@import '../style/mixins/universal.scss';
@import '../style/mixins/ifweb.scss';

// #variables
$sar-skeleton-bg: $sar-gray-200 !default;
$sar-skeleton-dark-bg: $sar-gray-400 !default;
$sar-skeleton-border-radius: $sar-rounded-sm !default;

$sar-skeleton-block-height: 16px !default;

$sar-skeleton-avatar-size: 32px !default;
$sar-skeleton-avatar-margin-right: 16px !default;

$sar-skeleton-title-width: 40% !default;
$sar-skeleton-title-height: 20px !default;
$sar-skeleton-title-gap: 16px !default;

$sar-skeleton-row-last-width: 60% !default;
$sar-skeleton-row-gap: 12px !default;

// @media (prefers-color-scheme: dark) {
//   :root,
//   page {
//     $sar-skeleton-dark-bg: $sar-gray-600-rgb;
//   }
// }
// #endvariables

@include bem(skeleton) {
  @include b() {
    @include universal;
    flex-direction: row;
    flex-wrap: nowrap;
  }

  @include e(block) {
    @include universal;
    width: 100%;
    height: $sar-skeleton-block-height;
    background-color: $sar-skeleton-bg;
    border-radius: $sar-skeleton-border-radius;
  }

  @include e(avatar) {
    @include universal;
    flex: none;
    width: $sar-skeleton-avatar-size;
    height: $sar-skeleton-avatar-size;
    background-color: $sar-skeleton-bg;
    border-radius: $sar-skeleton-border-radius;

    @include m(in-skeleton) {
      margin-right: $sar-skeleton-avatar-margin-right;
    }
  }

  @include e(title) {
    @include universal;
    width: $sar-skeleton-title-width;
    height: $sar-skeleton-title-height;
    background-color: $sar-skeleton-bg;
  }

  @include e(row) {
    @include universal;

    @include m(later) {
      margin-top: $sar-skeleton-row-gap;
    }
    @include m(last) {
      width: $sar-skeleton-row-last-width;
    }
  }

  @include e(content) {
    @include universal;
    flex: 1;
  }

  @include e(paragraph) {
    @include universal;

    @include m(in-skeleton) {
      margin-top: $sar-skeleton-title-gap;
    }
  }

  @include m(round) {
    border-radius: $sar-rounded-full;
  }

  @include m(animated) {
    @include ifweb {
      animation: #{bem-ns(skeleton-animated)} 1.2s ease infinite;
    }
  }
}

@include ifweb {
  @keyframes #{bem-ns(skeleton-animated)} {
    0%,
    100% {
      opacity: 1;
    }
    60% {
      opacity: 0.5;
    }
  }
}
